KmLoader.akamaiUrl="https://km.support.apple.com";KmLoader.callback="KmLoader.receiveSuccess";KmLoader.results=new Array();KmLoader.documentids=new Array();KmLoader.waitingForKbCall=new Array();KmLoader.waitingForHelpCall=new Array();KmLoader.callBackSuccessFuncs=new Array();KmLoader.callBackErrorFuncs=new Array();function KmLoader(){if(arguments[0]!=parseInt(arguments[0])){if(arguments[0]&&arguments[0].type){var a=arguments[0];KmLoader.type=a.type;KmLoader.sendKmCall(KmLoader.type,a.requestId,a.docTypes,a.productId,a.query,a.documentIds,a.sort,a.locale,a.maxRecords,a.excerpt,a.src,a.matchAllCategories,a.hierarchicalCategories,a.excludedDocIds,a.showEnglish,a.thumbnail,a.dicDomain,a.displayURL,a.managedans,a.appId,a.appName,a.success,a.error)}else{KmLoader.type="kmrecord";KmLoader.sendKmCall(KmLoader.type,"1",0,0,0,arguments[0],0,arguments[1],0,0,arguments[2])}}else{KmLoader.type="kmdata";KmLoader.sendKmCall(KmLoader.type,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20],arguments[21])}}KmLoader.sendCall=function(a){this.obj=new JSONscriptRequest(a+"&callback="+KmLoader.callback);if(this.obj.headLoc){try{this.obj.buildScriptTag();this.obj.addScriptTag()}catch(b){}}};KmLoader.sendKmCall=function(g,v,B,r,k,o,E,x,p,d,m,z,l,s,a,F,e,b,D,j,A,n,w){KmLoader.results[v]=new Array();KmLoader.documentids[v]=new Array();KmLoader.waitingForKbCall[v]=false;KmLoader.waitingForHelpCall[v]=false;var t="requestid="+v;var q=new Array();var h=new Array();if(n){KmLoader.callBackSuccessFuncs[v]=n}if(w){KmLoader.callBackErrorFuncs[v]=w}if(o){var u=o.split(",");for(var y=0;y<u.length;y++){if(u[y].indexOf("/")!=-1){h.push(u[y])}else{q.push(u[y])}var C="";if(u[y].indexOf(".html")!=-1){var c=/([a-zA-Z0-9]+\.html)/i.exec(u[y]);C=c[1]}else{C=u[y].replace(/(-[a-z]{2}_[A-Z]{2})/g,"")}KmLoader.documentids[v].push(C)}}if(k){t+="&query="+encodeURIComponent(k)}if(B){t+="&doctype="+encodeURIComponent(B)}if(E){t+="&sort="+encodeURIComponent(E)}if(r){t+="&productid="+encodeURIComponent(r)}if(x){t+="&locale="+encodeURIComponent(x)}if(p){t+="&maxrecords="+encodeURIComponent(p)}if(d){t+="&excerpt=y"}if(m){t+="&src="+encodeURIComponent(m)}if(z){t+="&matchallcategories=y"}if(l){t+="&hierarchicalcategories=n"}if(s){t+="&excludeids="+encodeURIComponent(s)}if(a){t+="&showenglish="+encodeURIComponent(a)}if(F){t+="&thumbnail="+encodeURIComponent(F)}if(e){t+="&dicDomain="+encodeURIComponent(e)}if(b){t+="&displayURL="+encodeURIComponent(b)}if(D){t+="&managedans="+encodeURIComponent(D)}if(j){t+="&appId="+encodeURIComponent(j)}if(A){t+="&appName="+encodeURIComponent(A)}KmLoader.isHttpOnly=ACUtil.isNonSecuredRequest();KmLoader.akamaiUrl=KmLoader.isHttpOnly?"http://km.support.apple.com":"https://km.support.apple.com";if(q.length>0||(q.length==0&&h.length==0)){KmLoader.waitingForKbCall[v]=true;var f=q.length>0?"&documentids="+encodeURIComponent(q.join(",")):"";KmLoader.sendCall(KmLoader.akamaiUrl+"/kb/index?page="+g+"&"+t+f)}if(h.length>0){KmLoader.waitingForHelpCall[v]=true;var f=h.length>0?"&paths="+encodeURIComponent(h.join(",")):"";KmLoader.sendCall(KmLoader.akamaiUrl+"/docs/"+g+".html?"+t+f)}};KmLoader.receiveSuccess=function(n,a){if(KmLoader.documentids[a]&&KmLoader.documentids[a].length>0&&KmLoader.type=="kmdata"&&n.results&&n.results.length>0){if(KmLoader.waitingForHelpCall[a]&&n.results[0].url.indexOf("?path=")!=-1){KmLoader.waitingForHelpCall[a]=false;KmLoader.results[a]=KmLoader.results[a].concat(n.results)}else{if(KmLoader.waitingForKbCall[a]&&n.results[0].url.indexOf("/kb/")!=-1){KmLoader.waitingForKbCall[a]=false;KmLoader.results[a]=KmLoader.results[a].concat(n.results)}}if(!KmLoader.waitingForKbCall[a]&&!KmLoader.waitingForHelpCall[a]){var k=new Array();var d=new Array();if(KmLoader.documentids[a]&&KmLoader.documentids[a].length>0){var m=KmLoader.results[a];var b=new Array();var f=0;for(var g=0;g<m.length;g++){var c="";if(m[g].url.indexOf("/kb/")!=-1){var h=/kb\/([A-Z]{2}\d{1,6})/i.exec(m[g].url);c=h[1]}else{var h=/([a-zA-Z0-9]+\.html)/i.exec(m[g].url.substring(40,m[g].url.length));c=h[1]}var e=KmLoader.documentids[a].indexOf(c);if(e!=-1){d[e]=m[g]}else{b[f++]=m[g]}}for(var g=0;g<d.length;g++){if(d[g]!=null&&d[g]!=undefined){k.push(d[g])}}for(var g=0;g<b.length;g++){if(b[g]!=null&&b[g]!=undefined){k.push(b[g])}}}if(KmLoader.callBackSuccessFuncs[a]){KmLoader.callBackSuccessFuncs[a]({results:k},a)}else{KmLoader.success({results:k},a)}}}else{if((n.results&&n.results.length>0)||(n.records&&n.records.length>0)){if(n.records&&typeof ACHistory!="undefined"&&typeof ACUtil!="undefined"){for(var g=0;g<n.records.length;g++){var c=n.records[g][0][1];var l=n.records[g][1][2];ACHistory.addKbView(c,l,"en_US","km")}}if(KmLoader.callBackSuccessFuncs[a]){KmLoader.callBackSuccessFuncs[a](n,a)}else{KmLoader.success(n,a)}}else{KmLoader.receiveError("No results found",a);KmLoader.error("No results found",a)}}};KmLoader.receiveError=function(a,b){if(b!=null&&b=="1"&&$("articleError")!=null){$("articleError").value=true}else{if(b!=null&&b=="2"&&$("discussionError")!=null){$("discussionError").value=true}}if(KmLoader.callBackErrorFuncs[b]){KmLoader.callBackErrorFuncs[b](a,b)}else{KmLoader.error(a,b)}};function JSONscriptRequest(a){this.fullUrl=a;if(KmLoader.logCall!=undefined){KmLoader.logCall(this.fullUrl)}this.headLoc=document.getElementsByTagName("head").item(0);this.scriptId="JscriptId"+JSONscriptRequest.scriptCounter++}JSONscriptRequest.scriptCounter=1;JSONscriptRequest.prototype.buildScriptTag=function(){this.scriptObj=document.createElement("script");this.scriptObj.setAttribute("type","text/javascript");this.scriptObj.setAttribute("charset","utf-8");this.scriptObj.setAttribute("src",this.fullUrl);this.scriptObj.setAttribute("id",this.scriptId);if(this.scriptObj.addEventListener){this.scriptObj.addEventListener("error",this.handleMissingResource.bind(this),false)}else{this.scriptObj.attachEvent("error",this.handleMissingResource.bind(this))}};JSONscriptRequest.prototype.removeScriptTag=function(){this.headLoc.removeChild(this.scriptObj)};JSONscriptRequest.prototype.addScriptTag=function(){this.headLoc.appendChild(this.scriptObj)};JSONscriptRequest.prototype.handleMissingResource=function(e){try{var urlParams=this.getURLParams(this.fullUrl.substring(this.fullUrl.indexOf("?")+1));var currentCallback=(urlParams.callback!=undefined?urlParams.callback:(urlParams.Callback!=undefined?urlParams.Callback:""));var currentJsObj=currentCallback.substring(0,currentCallback.indexOf("."));eval(currentJsObj+".resultsNone()")}catch(e){}};JSONscriptRequest.prototype.getURLParams=function(f){var b,d=/\+/g,c=/([^&=]+)=?([^&]*)/g,g=function(h){return decodeURIComponent(h.replace(d," "))},e=f;var a={};while(b=c.exec(e)){a[g(b[1])]=g(b[2])}return a};